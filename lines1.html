<!doctype html>
<!--
    "Lines 1" by Clif Bratcher 2013
-->
<html>
  <head>
    <title>Lines 1</title>
    <script src="js/two.min.js"></script>
    <style>
    body {
      background-color: #222;
    }
    </style>
  </head>
  <body>
    <script>
      var two = new Two({
        fullscreen: true,
        autostart: true
      }).appendTo(document.body);

      var midx = two.width / 2;
      var midy = two.height / 2;
      var maxScale = 20;
      var minScale = 1;
      var scaleStep = 0.1;

      var randFloat = function(max) {
        return Math.random() * max;
      };

      var randInt = function(max) {
        return Math.floor(randFloat(max + 1));
      };

      var randRangeInt = function(min, max) {
        return min + randInt(max - min);
      };

      var randRangeFloat = function(min, max) {
        return min + randInt(max - min);
      };


      var randShade = function() {
          var shade = randInt(256).toString(16);
          return '#' + shade + shade + shade;
      };

      var randX = function() {
          var bogox = randInt(5);
          return two.width * (.5 + randInt(bogox - .5)) / bogox;
      };

      var randY = function() {
          var bogoy = randInt(5);
          return two.height* (.5 + randInt(bogoy - .5)) / bogoy;
      };

      var newLine = function() {
          var x = randX();
          var y = randY();
          var length = randRangeInt(5, 20);
          var y1 = y - (length/2);
          var y2 = y + (length/2);

          var line = two.makeLine(x, y1, x, y2);

          line.stroke = randShade();
          line.clockwise = randInt(2);
          line.rotationSpeed = randFloat(1.75);
          line.scale = randInt(5);

          return line;
      };

      var lines = [];

      for (var m=0; m < 15 + Math.random() * 50; m++)
        lines[m] = newLine();

      /* Define our colorful friend */
      lines[0].translation.set(midx, midy);
      lines[0].stroke = '#f00';
      lines[0].rotationSpeed = .1;
      lines[0].scale = maxScale - 1;
      lines[0].clockwise = randInt(2);

      for (i in lines)
        lines[i].linewidth = .01;

      var step = function(obj) {
        var rotationAmt = 0.05 * obj.rotationSpeed;

        if (obj.clockwise)
          obj.rotation += rotationAmt;
        else
          obj.rotation -= rotationAmt;

        if (obj.grow == true)
          obj.scale += scaleStep * Math.random();
        else
          obj.scale -= scaleStep * Math.random();

        obj.opacity = obj.scale/maxScale;

        if (obj.scale >= maxScale) {
          obj.grow = false;
        }
        else if (obj.scale < minScale) {
          obj.translation.set(randX(), randY());
          obj.grow = true;
          obj.scale = minScale + scaleStep;
        }
      };

      two.bind('update', function() {
        for (var i in lines)
          step (lines[i]);
      });

    </script>
  </body>
</html>
