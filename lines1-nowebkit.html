<!doctype html>
<!--
    "Lines 1" by Clif Bratcher 2013
-->
<html>
  <head>
    <title>Lines 1</title>
    <script src="js/two.min.js"></script>
    <script src="js/random.js"></script>
    <style>
    body {
      background-color: #222;
    }
    </style>
  </head>
  <body>
    <script>

      var two = new Two({
        fullscreen: true,
        autostart: true
      }).appendTo(document.body);

      var midx = two.width / 2;
      var midy = two.height / 2;
      var maxScale = 20;
      var minScale = 1;
      var scaleStep = 0.1;

      var randShade = function() {
          var shade = Random.int(256).toString(16);
          return '#' + shade + shade + shade;
      };

      var randX = function() {
          return two.width * (Random.int(5) + 1)/6;
      };

      var randY = function() {
          return two.height * (Random.int(5) + 1)/6;
      };

      var newLine = function() {
          var x = randX();
          var y = randY();
          var length = Random.intRange(5, 20);
          var y1 = y - (length/2);
          var y2 = y + (length/2);

          var line = two.makeLine(x, y1, x, y2);

          line.stroke = randShade();
          line.clockwise = Random.bool();
          line.rotationSpeed = .2 + Random.float(1.75);
          line.scale = Random.int(maxScale/2);
          line.linewidth = 0.01;

          return line;
      };

      var lines = [];

      for (var m=0; m < 15 + Math.random() * 50; m++)
        lines[m] = newLine();

      /* Define our colorful friend */
      lines[0].translation.set(midx, midy);
      lines[0].stroke = '#f00';
      lines[0].rotationSpeed = .1;
      lines[0].scale = maxScale - 1;
      lines[0].clockwise = Random.bool();

      for (i in lines) {
        lines[i].index = i;
      }

      var step = function(obj) {
        var rotationAmt = 0.05 * obj.rotationSpeed;
        if (obj.clockwise)
          obj.rotation += rotationAmt;
        else
          obj.rotation -= rotationAmt;

        if (obj.grow == true)
          obj.scale += scaleStep * Math.random();
        else
          obj.scale -= scaleStep * Math.random();

        obj.opacity = (obj.scale - minScale)/maxScale;

        if (obj.scale >= maxScale) {
          obj.grow = false;
        }
        else if (obj.scale < minScale) {
          obj.translation.set(randX(), randY());
          obj.grow = true;
          obj.scale = minScale + scaleStep;
        }
      };

      two.bind('update', function() {
        for (var i in lines)
          step (lines[i]);
      });

    </script>
  </body>
</html>
