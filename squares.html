<!doctype html>
<!--
    "Squares" by Clif Bratcher 2013
-->
<html>
  <head>
    <title>Squares</title>
    <script src="js/two.min.js"></script>
    <script src="js/random.js"></script>
    <style>
    body {
      background-color: #333;
    }
    </style>
  </head>
  <body>
    <script>
      var two = new Two({
        fullscreen: true,
        autostart: true
      }).appendTo(document.body);

      var midx = two.width / 2;
      var midy = two.height / 2;

      var newSquare = function() {
        do {
          var x = two.width * (Random.int(5) + 1)/6;
          var y = two.height * (Random.int(5) + 1)/6;

          if (x == midx && y == midy)
              x = y = 0;

        } while (x == 0 && y == 0);

        var size = 10 + Math.random() * 60;
        var square = two.makeRectangle(x, y, size, size);
        square.opacity = .5;
        square.clockwise = Random.bool();
        return square;
      };

      var sq = [
        two.makeRectangle(midx, midy, 50 ,50)
      ];

      for (var m=1; m < 5 + Random.int(20); m++)
        sq[m] = newSquare();

      sq[0].fill = '#900';

      var step = function(obj) {
        obj.linewidth = Math.random();
        var rotationAmt = 0.1 * (Math.random() - .3);
        if (obj.clockwise)
          obj.rotation += rotationAmt;
        else
          obj.rotation -= rotationAmt;

        if (obj.grow == true)
          obj.scale += 0.05 * Math.random();
        else
          obj.scale -= 0.05 * Math.random();

        if (obj.scale >= 10)
          obj.grow = false;
        else if (obj.scale <= 1)
          obj.grow = true;
      };

      two.bind('update', function() {
        for (var i in sq)
          step (sq[i]);
      });

    </script>
  </body>
</html>
